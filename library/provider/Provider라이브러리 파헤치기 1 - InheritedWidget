# Flutter Providerì™€ notifyListeners() ì™„ë²½ ë¶„ì„

## ê°œìš”
Flutterë¥¼ ì²˜ìŒ ë°°ìš°ê¸° ì‹œì‘í•˜ë©´ ë³´í†µ ìƒíƒœ ê´€ë¦¬ì˜ ì¤‘ìš”ì„±ê³¼ Provider ë¼ì´ë¸ŒëŸ¬ë¦¬ë¶€í„° ë°°ìš°ê²Œ ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì›ë¦¬ë¥¼ ê¹Šì´ ì´í•´í•˜ê³  ì§ì ‘ ì—´ì–´ë³¸ ì‚¬ëŒì€ ë§ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤.

ì´ ê¸€ì—ì„œëŠ” Provider ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ í•µì‹¬ì¸ `notifyListeners()`ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ, ë‚´ë¶€ ì›ë¦¬ì™€ ë™ì‘ ë°©ì‹ì„ ë¶„ì„í•©ë‹ˆë‹¤.

## Provider ê³µì‹ ë¬¸ì„œ ë° ë¦¬í¬ì§€í† ë¦¬
- [ğŸš€ Provider pub.dev ë§í¬](https://pub.dev/packages/provider)
- [ğŸš€ Provider GitHub Repo](https://github.com/rrousselGit/provider)
- [ğŸš€ InheritedWidget ê³µì‹ ë¬¸ì„œ](https://api.flutter.dev/flutter/widgets/InheritedWidget-class.html)

---

## 1. Providerì˜ ë¿Œë¦¬, InheritedWidget

Providerì˜ í•µì‹¬ ê¸°ëŠ¥ì€ **ìœ„ì ¯ íŠ¸ë¦¬ì—ì„œ ë©€ë¦¬ ë–¨ì–´ì§„ ìœ„ì ¯ë“¤ì´ ìƒíƒœë¥¼ ê³µìœ í•˜ê³  ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ ë°˜ì˜ë˜ëŠ” ê²ƒ**ì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ìƒíƒœ ê´€ë¦¬ì˜ ê·¼ê°„ì´ ë°”ë¡œ `InheritedWidget`ì…ë‹ˆë‹¤.

Provider ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë‹¤ì–‘í•œ Providerìœ„ì ¯ë“¤ì€ ëª¨ë‘
InheritedWidgetë¥¼ ë² ì´ìŠ¤ë¡œ ì œì‘ ë˜ì—ˆìŠµë‹ˆë‹¤.
ê·¸ë¦¬ê³  InheritedWidgetì€ ProxyWidgetì„ ìƒì†í•˜ê³  ìˆëŠ” ì¶”ìƒ í´ë˜ìŠ¤ì¸ë°, ëª‡ëª‡ ì¤‘ìš”í•œ íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.

### InheritedWidgetì˜ í•µì‹¬ ê¸°ëŠ¥
1. **ìƒíƒœë¥¼ í•˜ìœ„ ìœ„ì ¯ íŠ¸ë¦¬ì— ì „ë‹¬**
2. **`dependOnInheritedWidgetOfExactType<T>()`ë¡œ ìƒíƒœ êµ¬ë…**
3. **`updateShouldNotify()`ë¥¼ ì˜¤ë²„ë¼ì´ë“œí•˜ì—¬ ë³€ê²½ ê°ì§€**

#### Flutter InheritedWidget ì½”ë“œ ë¶„ì„
```dart
// flutter/lib/src/widgets/framework.dart
abstract class InheritedWidget extends ProxyWidget {
  const InheritedWidget({ super.key, required super.child });

  @override
  InheritedElement createElement() => InheritedElement(this);

  @protected
  bool updateShouldNotify(covariant InheritedWidget oldWidget);
}
```
- `updateShouldNotify()` â†’ ìƒíƒœ ë³€ê²½ ì—¬ë¶€ë¥¼ ê°ì§€
- `createElement()` â†’ `InheritedElement`ë¥¼ ìƒì„±í•˜ì—¬ ê´€ë¦¬

ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ **ì§ì ‘ InheritedWidgetì„ í™œìš©í•´ ìƒíƒœ ê´€ë¦¬**ë¥¼ êµ¬í˜„í•´ ë³´ê² ìŠµë‹ˆë‹¤.

---

## 2. InheritedWidgetì„ ì‚¬ìš©í•œ ìƒíƒœ ê´€ë¦¬

### 1ï¸âƒ£ InheritedWidgetì„ í™œìš©í•œ ìƒíƒœ ê´€ë¦¬ ëª¨ë¸
```dart
class MyInheritedWidget extends InheritedWidget {
  final int count;
  final VoidCallback increment;

  MyInheritedWidget({
    Key? key,
    required this.count,
    required this.increment,
    required Widget child,
  }) : super(key: key, child: child);

  @override
  bool updateShouldNotify(MyInheritedWidget oldWidget) {
    return oldWidget.count != count;
  }
}
```

### 2ï¸âƒ£ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” Stateful ìœ„ì ¯ ìƒì„±
```dart
class InheritedCounterProvider extends StatefulWidget {
  final Widget child;

  const InheritedCounterProvider({Key? key, required this.child}) : super(key: key);

  @override
  _InheritedCounterProviderState createState() => _InheritedCounterProviderState();
}

class _InheritedCounterProviderState extends State<InheritedCounterProvider> {
  int count = 0;

  void increment() {
    setState(() {
      count++;
    });
  }

  @override
  Widget build(BuildContext context) {
    return MyInheritedWidget(
      count: count,
      increment: increment,
      child: widget.child,
    );
  }
}
```

### 3ï¸âƒ£ ìœ„ì ¯ íŠ¸ë¦¬ì— InheritedWidget ì ìš©
```dart
void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return InheritedCounterProvider(
      child: MaterialApp(
        title: 'Flutter Demo',
        theme: ThemeData(useMaterial3: false),
        home: InheritedHomePage(),
      ),
    );
  }
}
```

### 4ï¸âƒ£ ìƒíƒœë¥¼ ì½ê³  UI ì—…ë°ì´íŠ¸
```dart
class InheritedHomePage extends StatelessWidget {
  const InheritedHomePage({super.key});

  @override
  Widget build(BuildContext context) {
    final counterWidget =
        context.dependOnInheritedWidgetOfExactType<MyInheritedWidget>();

    return Scaffold(
      appBar: AppBar(title: Text('InheritedWidget Example')),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Text('Counter: ${counterWidget?.count ?? 0}', style: TextStyle(fontSize: 24)),
            SizedBox(height: 20),
            ElevatedButton(
              onPressed: counterWidget?.increment,
              child: Text('Increment'),
            ),
          ],
        ),
      ),
    );
  }
}
```

---

## 3. notifyListeners() ë¶„ì„ ë° Providerì™€ ë¹„êµ

### 1ï¸âƒ£ notifyListeners()ì˜ ì—­í• 
Providerì—ì„œëŠ” `notifyListeners()`ê°€ í˜¸ì¶œë  ë•Œ UIë¥¼ ìë™ìœ¼ë¡œ ë‹¤ì‹œ ë¹Œë“œí•©ë‹ˆë‹¤.

```dart
class ChangeNotifier {
  ObserverList<VoidCallback>? _listeners = ObserverList<VoidCallback>();

  void addListener(VoidCallback listener) {
    _listeners?.add(listener);
  }

  void removeListener(VoidCallback listener) {
    _listeners?.remove(listener);
  }

  @protected
  void notifyListeners() {
    if (_listeners != null) {
      for (final VoidCallback listener in List<VoidCallback>.from(_listeners!)) {
        listener();
      }
    }
  }
}
```

- `_listeners` ë¦¬ìŠ¤íŠ¸ì— UI ì—…ë°ì´íŠ¸ë¥¼ ìˆ˜í–‰í•  ì½œë°± í•¨ìˆ˜ë“¤ì„ ì €ì¥
- `notifyListeners()`ê°€ í˜¸ì¶œë˜ë©´ í•´ë‹¹ ë¦¬ìŠ¤íŠ¸ì˜ ëª¨ë“  ë¦¬ìŠ¤ë„ˆ ì‹¤í–‰ â†’ UIê°€ ë³€ê²½ë¨

### 2ï¸âƒ£ Providerì—ì„œ notifyListeners() í˜¸ì¶œí•˜ê¸°
```dart
class CounterModel extends ChangeNotifier {
  int _count = 0;

  int get count => _count;

  void increment() {
    _count++;
    notifyListeners();
  }
}
```

```dart
ElevatedButton(
  onPressed: () {
    context.read<CounterModel>().increment();
  },
  child: Text("Increment"),
),
```

> `read<T>()`ë¥¼ ì‚¬ìš©í•´ì•¼ ë²„íŠ¼ì´ ë¶ˆí•„ìš”í•˜ê²Œ ë¦¬ë¹Œë“œë˜ì§€ ì•ŠìŒ

---

## 4. ì •ë¦¬
### âœ… InheritedWidgetê³¼ Provider ì°¨ì´ì 
| ê¸°ëŠ¥ | InheritedWidget | Provider |
|------|---------------|----------|
| ìƒíƒœ ê³µìœ  | âœ… ê°€ëŠ¥ | âœ… ê°€ëŠ¥ |
| UI ìë™ ì—…ë°ì´íŠ¸ | âŒ ì§ì ‘ `setState()` í•„ìš” | âœ… `notifyListeners()`ë¡œ ìë™ ì—…ë°ì´íŠ¸ |
| í™•ì¥ì„± | âŒ ì œí•œì  | âœ… ë‹¤ì–‘í•œ Provider ì§€ì› |

ProviderëŠ” InheritedWidgetì„ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì¡Œì§€ë§Œ, ë” ê°•ë ¥í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

### âœ… í•µì‹¬ ì •ë¦¬
1. `InheritedWidget`ì€ ìƒíƒœë¥¼ ê³µìœ í•˜ì§€ë§Œ UI ìë™ ê°±ì‹  ê¸°ëŠ¥ì€ ì—†ìŒ
2. ProviderëŠ” `notifyListeners()`ë¥¼ í™œìš©í•˜ì—¬ UIë¥¼ ìë™ ê°±ì‹ 
3. `context.read<T>()`ëŠ” ìƒíƒœë¥¼ ë³€ê²½í•  ë•Œ ì‚¬ìš©, `context.watch<T>()`ëŠ” ìƒíƒœë¥¼ ê°ì§€í•  ë•Œ ì‚¬ìš©
